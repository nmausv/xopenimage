#!/bin/sh
# this generates the "build.c" file
# Modifications/modernization 2025 Douglas Maus

# system information
if [ -x /bin/uname ]; then
  system=$(/bin/uname -a)
elif [ -x /usr/bin/uname ]; then
  system=$(/usr/bin/uname -a)
else
  system='<unknown system>'
fi
system="char *BuildSystem = \"$system\";"

# build date
if [ -x /bin/date ]; then
  date=$(/bin/date -u "+%Y-%m-%d %H:%M:%S")
  date="char *BuildDate = \"$date UTC\";"
else
  date='char *BuildDate = NULL;'
fi

# output to build.c
echo '/* build.c */' > build.c
echo '/* THIS FILE IS AUTOMATICALLY GENERATED */' >> build.c
echo '#include <stdlib.h>' >> build.c
echo $system >> build.c
echo $date >> build.c

